#include<math.h>
double Keq[] = {0.000000000056};
double molarMass[] = {84.008};
String compounds[] = {"NaHCO3"};
double pHresults[] = {0};
//WILL NEED TO CHANGE FOR LOOP WHEN YOU ADD NEW STUFF

double mass = 0; //IN GRAMS
double volume = 0.050; //IN LITERS

double pH = 0;
String identity = "";
double percentError = -1;

void setup() {
  // put your setup code here, to run once:
  pinMode(2,INPUT);
}

void loop() {
  // put your main code here, to run repeatedly:
  if(digitalRead(2) == true){
    double closestDistance = -1;
    int bestFitIndex = 0;
    for(int i = 0; i < 1; i++){ 
      pHresults[i] = log(1/((-Keq[i]+sqrt(pow(Keq[i],2) + 4*((mass/molarMass[i])/volume)*Keq[i]))/2))/log(10);
      if(closestDistance == -1){
        closestDistance = abs(pHresults[i] - pH);
      }else if(abs(pHresults[i] - pH) < closestDistance){
        closestDistance = pHresults[i];
        bestFitIndex = i;
      }
    }
    identity = compounds[bestFitIndex];
    percentError = 100*(abs(pHresults[bestFitIndex] - pH)/pH);
  }
}
